package io.jiantao.android.sample.viewimport android.os.Bundleimport androidx.appcompat.app.AppCompatActivityimport io.jiantao.android.sample.Rimport io.jiantao.android.sample.common.SimpleCardFragmentimport io.jiantao.android.sample.common.SimplePagerAdapterimport io.jiantao.android.uikit.util.ViewUtilsimport kotlinx.android.synthetic.main.activity_test_view_visible.*/** * Created by Jiantao.Yang on 2019-12-18. */class TestViewVisibleActivity : AppCompatActivity() {    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_test_view_visible)        button.setOnClickListener {            //            toggleTextViewPosition()//            testViewPagerItemView()            println("test in mainThread , ${ViewUtils.isVisibleToUser(button)}")            Thread {                println("test in other thread  , ${ViewUtils.isVisibleToUser(button)}")            }.start()        }        setupViewPager()    }    private fun testViewPagerItemView() {        val childCount = view_pager.childCount        List(childCount) {            val view = view_pager.getChildAt(it)            println("viewPagerItemView is $view, isVisible = ${ViewUtils.isVisibleToUser(view)}")        }    }    private fun setupViewPager() {        val fragments = List(3) { SimpleCardFragment.getInstance(it.toString()) }        val titles = List(3) { "title : $it" }        val pagerAdapter = SimplePagerAdapter(supportFragmentManager, fragments, titles)        view_pager.adapter = pagerAdapter    }    private fun toggleTextViewPosition() {        // 此方法改变view在垂直方向上的位置，属性值并不修改。//        textView.translationY = if (textView.y > 0) -500f else 0f        val top = if (textView.top > 0) -200 else 100        // 此方法改变view在其父控件的中布局属性        textView.layout(100, top, 200, top + 100)        println(" TextView.top = ${textView.top} , y = ${textView.y} , isVisible = ${ViewUtils.isVisibleToUser(textView)}")    }}